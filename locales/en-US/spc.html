<script type="text/x-red" data-help-name="spc">
    <p>Calculates statistics about input data. This is a wrapper around the <a href="http://simplestatistics.org/">Simple Statistics</a> library.</p>

    <h3>Properties</h3>
        <dl class="message-properties">
            <dt>name <span class="property-type">string</span></dt>
            <dd> the node name to display in the editor. </dd>
            <dt>data set size <span class="property-type">integer</span></dt>
            <dd>maximum number of data elements to store. 0 for unlimited.</dd>
            <dt>input property <span class="property-type">property</span></dt>
            <dd> the property containing the input data item. </dd>
            <dt>result property <span class="property-type">property</span></dt>
            <dd> the property in which the result will be stored (if requested). </dd>
            <dt>parameter property <span class="property-type">property</span></dt>
            <dd> the property that will be used for a parameter if required. </dd>
            <dt>strip function <span class="property-type">boolean</span></dt>
            <dd> if set, the function name is stripped from the topic.</dd>
            <dt>result only<span class="property-type">boolean</span></dt>
            <dd> if set, messages are only output when a function is requested</dd>
        </dl>

    <h3>Input</h3>
        <dl class="message-properties">
            <dt><i>input property</i> <span class="property-type">number | array of number</span></dt>
            <dd> the data item to be added to the data set.</dd>
            <dt><i>parameter property</i> <span class="property-type">number</span></dt>
            <dd> the value to be used as a function parameter if required.</dd>
        </dl>

    <h3>Output</h3>
        <dl class="message-properties">
            <dt><i>result property</i> <span class="property-type">float</span></dt>
            <dd> the result of the function if requested.</dd>
        </dl>

        The contents of input messages are passed through unchanged.

    <h3>Details</h3>
        <p>The value of <code>input property</code> is saved into the data set.  The
        <code>input property</code> may also contain an array of values which will be saved into the
        data set.  If <code>data set size</code> is greater that 0 then the size of the data set will be
        limited to the numer of elements specified, with the oldest elements dropped first.</p>

        <p>When a message with a topic that ends in a statistical function name is received, that statistic is calculated and output to the <code>result property</code>. For example, a message with the topic <i>data/mean</i> would output the mean of the data received so far. Optionally, the function name can be stripped from the topic. For statistical functions that require a parameter, the parameter is passed in using the <code>parameter property</code>.</p>
        <p>The functions in the Simple Statistics library that are supported are:
        <ul>
            <li>bernoulliDistribution</li>
            <li>chunk</li>
            <li>ckmeans</li>
            <li>cumulativeStdNormalProbability</li>
            <li>equalIntervalBreaks</li>
            <li>errorFunction</li>
            <li>factorial</li>
            <li>inverseErrorFunction</li>
            <li>geometricMean</li>
            <li>harmonicMean</li>
            <li>interquartileRange</li>
            <li>max</li>
            <li>mean</li>
            <li>median</li>
            <li>medianAbsoluteDeviation</li>
            <li>min</li>
            <li>mode</li>
            <li>poissonDistribution</li>
            <li>probit</li>
            <li>product</li>
            <li>quantile</li>
            <li>quantileRank</li>
            <li>rootMeanSquare</li>
            <li>sample</li>
            <li>sampleWithReplacement</li>
            <li>sampleKurtosis</li>
            <li>sampleSkewness</li>
            <li>sampleStandardDeviation</li>
            <li>shuffle</li>
            <li>standardDeviation</li>
            <li>sum</li>
            <li>sumNthPowerDeviations</li>
            <li>tTest</li>
            <li>uniqueCount</li>
            <li>variance</li>
        </ul>
        In addition, three other functions are implemented:
        <ul>
            <li>size - returns the size of the data set</li>
            <li>clear - clears the data set</li>
            <li>dump - returns the data set in an array</li>
        </ul>

        These three functions can also contain a data item or array of data items which are added to the data set before calculating the result for <code>size</code> or <code>dump</code>, or after the data set is cleared for <code>clear</code>.
        </p>
</script>
